---
// src/pages/docs/react/basic.astro
import Layout from '../../../layouts/Layout.astro'
import ReactUploader from '../../../components/react/ReactUploader'
---

<Layout title="Basic Usage - React">
  <div
    class="mb-4 text-sm font-mono text-neutral-500 uppercase tracking-widest"
  >
    @elekcsv/react
  </div>

  <h1 class="mb-8 border-b-2 border-black pb-4">2.2 Basic Usage</h1>

  <p class="text-xl text-neutral-600 leading-relaxed mb-10">
    Integrating the <code>useCSVImporter</code> hook is as simple as defining your
    expected schema and attaching the `importFile` method to an input or dropzone.
  </p>

  <!-- Interactive Live Demo Section -->
  <div class="my-16 bg-white border-2 border-black px-8 pt-8 pb-0 relative">
    <div
      class="absolute -top-3 left-6 bg-white px-2 text-sm font-bold uppercase tracking-widest text-black"
    >
      Live Interactive Demo
    </div>

    <div class="flex flex-col md:flex-row items-center gap-8 pb-8">
      <div class="w-full md:w-2/3">
        <ReactUploader client:only="react" />
      </div>
      <div class="w-full md:w-1/3 border-l-2 border-neutral-100 pl-8">
        <h3 class="text-xl font-bold mb-4 mt-0 tracking-tight text-black">
          Test the hook!
        </h3>
        <p class="text-neutral-500 mb-8 leading-relaxed text-[15px]">
          Download the dummy CSV files below. They contain 20 rows of realistic
          user data. Drag and drop them into the zone to see the React component
          parse and render the output (and any structural errors) in
          milliseconds.
        </p>

        <div class="flex flex-col gap-3">
          <a
            href="/sample.csv"
            download
            class="border-2 border-black p-4 flex items-center gap-4 hover:bg-neutral-50 transition-colors group no-underline!"
            style="text-decoration:none;"
          >
            <svg
              class="w-4 h-4 text-neutral-400 group-hover:text-black transition-colors"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
              ></path>
            </svg>
            <div class="text-sm font-bold text-black group-hover:underline">
              <div>Download</div>
              <div>sample.csv</div>
            </div>
          </a>

          <a
            href="/sample-invalid.csv"
            download
            class="border-2 border-dashed border-red-500 p-4 flex items-center gap-4 hover:bg-red-50 transition-colors group no-underline!"
            style="text-decoration:none;"
          >
            <svg
              class="w-4 h-4 text-red-400 group-hover:text-red-600 transition-colors"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
              ></path>
            </svg>
            <div class="text-sm font-bold text-red-600 group-hover:underline">
              <div>Download</div>
              <div>sample-invalid.csv</div>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>

  <h2>The Implementation</h2>
  <p>
    The interactive demo above is powered by the following component code.
    Notice how we do not need to manage `useState` for the parsed data or
    errors; the hook handles the data flow reactively.
  </p>

  <pre><code>import &#123; useCSVImporter &#125; from '@elekcsv/react';

export default function MyUploader() &#123;
  // Initialize the hook with basic schema inference
  const &#123; data, errors, importFile, isParsing &#125; = useCSVImporter(&#123;
    schema: &#123;
      fields: [
        &#123; key: 'id', type: 'number' &#125;,
        &#123; key: 'first_name', type: 'string' &#125;,
        &#123; key: 'email', type: 'string', required: true &#125;,
      ]
    &#125;
  &#125;);

  // Attach to a standard HTML input
  const handleChange = async (e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; &#123;
    if (e.target.files && e.target.files[0]) &#123;
      await importFile(e.target.files[0]);
    &#125;
  &#125;;

  return (
    &lt;div&gt;
      &lt;input type="file" accept=".csv" onChange=&#123;handleChange&#125; /&gt;
      
      &#123;isParsing ? &lt;p&gt;Parsing...&lt;/p&gt; : null&#125;
      
      &#123;data.length &gt; 0 && (
         &lt;pre&gt;&#123;JSON.stringify(data, null, 2)&#125;&lt;/pre&gt;
      )&#125;
    &lt;/div&gt;
  );
&#125;</code></pre>

  <div class="mt-16 flex justify-between">
    <a
      href="/docs/react/install"
      class="inline-flex items-center gap-2 px-6 py-3 border border-neutral-300 text-black hover:border-black rounded-md text-sm font-medium no-underline! transition-colors"
      style="text-decoration:none;"
    >
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
        ><path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
      </svg>Previous
    </a>
    <a
      href="/docs/react/advanced"
      class="inline-flex items-center gap-2 px-6 py-3 bg-black text-white hover:bg-neutral-800 rounded-md text-sm font-medium no-underline! transition-colors"
      style="text-decoration:none;"
    >
      Next: Advanced Usage<svg
        class="w-4 h-4"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        ><path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
      </svg>
    </a>
  </div>
</Layout>
